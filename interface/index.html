<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>WireIt - WiringEditor</title>
<!--
	<link rel="icon" href="../favicon.ico" type="image/png" />
  <link rel="SHORTCUT ICON" href="../favicon.ico" type="image/png" />
-->

<!-- YUI -->
<link rel="stylesheet" type="text/css" href="lib/yui/reset-fonts-grids/reset-fonts-grids.css" />
<link rel="stylesheet" type="text/css" href="lib/yui/assets/skins/sam/skin.css" />

<!-- InputEx CSS -->
<link type='text/css' rel='stylesheet' href='lib/inputex/css/inputEx.css' />

<!-- YUI-accordion CSS -->
<link rel="stylesheet" type="text/css" href="lib/accordionview/assets/skins/sam/accordionview.css" />

<!-- WireIt CSS -->
<link rel="stylesheet" type="text/css" href="css/WireIt.css" />
<link rel="stylesheet" type="text/css" href="css/WireItEditor.css" />

<style>
div.WireIt-Container {
	width: 350px; /* Prevent the modules from scratching on the right */
}

div.WireIt-InOutContainer {	
	width: 150px;
}

div.WireIt-InputExTerminal {
	float: left;
	width: 21px;
	height: 21px;
	position: relative;
}
div.WireIt-InputExTerminal div.WireIt-Terminal {
	top: -3px;
	left: -7px;
}
div.inputEx-Group div.inputEx-label {
	width:100px;
}

div.WireIt-ImageContainer {
	width: auto;
}

div.Bubble div.body {
	width: 70px;
	height: 45px;
	opacity: 0.8;
	cursor: move;
}

.WiringEditor-module span {
	position: relative;
	top: -3px;
}

</style>


<!-- YUI -->
<script type="text/javascript" src="lib/yui/utilities/utilities.js"></script>

<!--
<script type="text/javascript" src="lib/yui/resize/resize-min.js"></script>
<script type="text/javascript" src="lib/yui/layout/layout-min.js"></script>
<script type="text/javascript" src="lib/yui/container/container-min.js"></script>
<script type="text/javascript" src="lib/yui/json/json-min.js"></script>
<script type="text/javascript" src="lib/yui/button/button-min.js"></script>
<script type="text/javascript" src="lib/yui/tabview/tabview-min.js"></script>
-->

<script type="text/javascript" src="lib/yui/resize/resize.js"></script>
<script type="text/javascript" src="lib/yui/layout/layout.js"></script>
<script type="text/javascript" src="lib/yui/container/container.js"></script>
<script type="text/javascript" src="lib/yui/json/json.js"></script>
<script type="text/javascript" src="lib/yui/button/button.js"></script>
<script type="text/javascript" src="lib/yui/tabview/tabview.js"></script>

<!-- InputEx with wirable options (WirableField-beta) -->
<script src="lib/inputex/js/inputex.js"  type='text/javascript'></script>
<script src="lib/inputex/js/Field.js"  type='text/javascript'></script>
<script src="js/util/inputex/WirableField-beta.js" type="text/javascript"></script>
<script src="lib/inputex/js/Group.js"  type='text/javascript'></script>
<script src="lib/inputex/js/Visus.js"  type='text/javascript'></script>
<script src="lib/inputex/js/fields/StringField.js"  type='text/javascript'></script>
<script src="lib/inputex/js/fields/Textarea.js"  type='text/javascript'></script>
<script src="lib/inputex/js/fields/SelectField.js"  type='text/javascript'></script>
<script src="lib/inputex/js/fields/EmailField.js"  type='text/javascript'></script>
<script src="lib/inputex/js/fields/UrlField.js"  type='text/javascript'></script>
<script src="lib/inputex/js/fields/ListField.js"  type='text/javascript'></script>
<script src="lib/inputex/js/fields/CheckBox.js"  type='text/javascript'></script>
<script src="lib/inputex/js/fields/InPlaceEdit.js"  type='text/javascript'></script>

<!-- YUI-Accordion -->
<script src="lib/accordionview/accordionview-min.js"  type='text/javascript'></script>

<!-- WireIt -->
<!--[if IE]><script type="text/javascript" src="lib/excanvas.js"></script><![endif]-->
<script type="text/javascript" src="js/WireIt.js"></script>
<script type="text/javascript" src="js/CanvasElement.js"></script>
<script type="text/javascript" src="js/Wire.js"></script>
<script type="text/javascript" src="js/Terminal.js"></script>
<script type="text/javascript" src="js/util/DD.js"></script>
<script type="text/javascript" src="js/util/DDResize.js"></script>
<script type="text/javascript" src="js/Container.js"></script>
<script type="text/javascript" src="js/Layer.js"></script>
<script type="text/javascript" src="js/util/inputex/FormContainer-beta.js"></script>
<script type="text/javascript" src="js/LayerMap.js"></script>
<script type="text/javascript" src="js/WiringEditor.js"></script>
<script type="text/javascript" src="js/ImageContainer.js"></script>
<script type="text/javascript" src="js/InOutContainer.js"></script>

<!-- Need JQuery for this adapter -->
<!-- <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.2.min.js"></script> -->
<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/xmlrpc.js"></script>
<script type="text/javascript" src="js/adapters/jquery.js"></script>

<!-- For storage -->
<!-- <script src="http://cdn.openkeyval.org/statics/openkeyval.packed.js"></script> -->
<!-- <script src="js/openkeyval.packed.js"></script>
<script type="text/javascript" src="js/adapters/openkeyval.js"></script>
-->

<script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.0.5.min.js"></script>
<!-- <script type="text/javascript" src="js/parse-1.0.5.min.js"></script> -->
<script type="text/javascript" src="js/adapters/parse.js"></script>

<!-- <script type="text/javascript" src="ifttt.js"></script> -->
<!-- <script type="text/javascript" src="blockchoice.js"></script> -->


<style>
/* Comment Module */
div.WireIt-Container.WiringEditor-module-comment { width: 200px; }
div.WireIt-Container.WiringEditor-module-comment div.body { background-color: #EEEE66; }
div.WireIt-Container.WiringEditor-module-comment div.body textarea { background-color: transparent; font-weight: bold; border: 0; }
</style>

<script>
function jsInclude(script,callback){
    $.getScript(script, function() {
        if(typeof callback == 'function')
        callback.apply({},arguments);
    });
}

// InputEx needs a correct path to this image
inputEx.spacerUrl = "lib/inputex/trunk/images/space.gif";

var editor;

function createEditor (blocks) {
	editor = new WireIt.WiringEditor(blocks); 
	// Choose a different storage adapter.
	editor.setOptions({ adapter : WireIt.WiringEditor.adapters.Parse });
	// Open the infos panel
	editor.accordionView.openPanel(2); 
}

YAHOO.util.Event.onDOMReady( function() {
   // Load the choice
  $.ajax({
    url: "http://localhost:8000/blockfile/",
    type: "GET",
    dataType: "xml",
    success: function (data) {
      var blocksFile = $(data).text();
      jsInclude("/blocks/" + blocksFile,
        function () {
          createEditor(window.blocks);
        });
    }});
  });
  
</script>

</head>

<body class="yui-skin-sam">

	<div id="top">
		<div class="logo">Flow for the Arduino</a></div>
		<div id="toolbar"></div>

		<div class="topright">
      <a href="http://craftofelectronics.org/"><img src="images/craft-logo-40.png"/></a>
		</div>
	</div>


	<div id="left">
	</div>
	
	<div id="right">
	  <ul id="accordionView">
		<li>
			<h2>Properties</h2>
			<div>
				<div id="propertiesForm"></div>
			</div>
		</li>
		<li>
			<h2>Minimap</h2>
			<div style='position: relative;'>
				<div id="layerMap"></div>
			</div>
		</li>

	  </ul>
	</div>

	<div id="center">
	</div>
	
	
	<div id="helpPanel">
	    <div class="hd">Welcome to the Flow editor for the Arduino.</div>
	    <div class="bd" style="text-align: left;">
					
					<p>This environment is built on the WireIt library.</p>
					<br />
					<p><b>Drag and drop modules from the Blocks list</b> on the left to the working layer in the middle.</p>
					<br />
					<p><a href="demo.js" target="_new">Click here to view the language definition for this editor.</a></p>
					<br />
					<p>Close this dialog to explore Flow.</p>
	    </div>
	</div>

</body>
</html>
